<?php
 if ( ! class_exists( 'Redux_Validation_color_rgba' ) ) { class Redux_Validation_color_rgba { function __construct( $parent, $field, $value, $current ) { $this->parent = $parent; $this->field = $field; $this->field['msg'] = ( isset( $this->field['msg'] ) ) ? $this->field['msg'] : __( 'This field must be a valid color value.', 'redux-framework' ); $this->value = $value; $this->current = $current; $this->validate(); } function validate_color_rgba( $color ) { if ( $color == "transparent" ) { return $color; } $color = str_replace( '#', '', $color ); if ( strlen( $color ) == 3 ) { $color = $color . $color; } if ( preg_match( '/^[a-f0-9]{6}$/i', $color ) ) { $color = '#' . $color; } return array( 'hex' => $color, 'rgba' => Redux_Helpers::hex2rgba( $color ) ); } function validate() { if ( is_array( $this->value ) ) { foreach ( $this->value as $k => $value ) { $this->value[ $k ] = $this->validate_color_rgba( $value ); } } else { $this->value = $this->validate_color_rgba( $this->value ); } } } }
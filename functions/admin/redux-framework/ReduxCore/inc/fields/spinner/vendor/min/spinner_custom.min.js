!function(t){var e,n="ui-state-active",i="ui-state-hover",s="ui-state-disabled",o=t.ui.keyCode,a=o.UP,r=o.DOWN,u=o.RIGHT,l=o.LEFT,c=o.PAGE_UP,p=o.PAGE_DOWN,d=o.HOME,h=o.END,f=t.browser.msie,m=t.browser.mozilla?"DOMMouseScroll":"mousewheel",v=".uispinner",g=[a,r,u,l,c,p,d,h,o.BACKSPACE,o.DELETE,o.TAB];t.widget("ui.spinner",{options:{min:null,max:null,allowNull:!1,group:"",point:".",prefix:"",suffix:"",places:null,defaultStep:1,largeStep:10,mouseWheel:!0,increment:"slow",className:null,showOn:"always",width:95,upIconClass:"ui-icon-triangle-1-n",downIconClass:"ui-icon-triangle-1-s",format:function(t,e){var n=this,i=/(\d+)(\d{3})/,s=(isNaN(t)?0:Math.abs(t)).toFixed(e)+"";for(s=s.replace(".",n.point);i.test(s)&&n.group;s=s.replace(i,"$1"+n.group+"$2"));return(0>t?"-":"")+n.prefix+s+n.suffix},parse:function(t){var e=this;return"."==e.group&&(t=t.replace(".","")),"."!=e.point&&(t=t.replace(e.point,".")),parseFloat(t.replace(/[^0-9\-\.]/g,""))}},_create:function(){var t=this,e=t.element,n=e.attr("type");return!e.is("input")||"text"!=n&&"number"!=n?(console.error("Invalid target for ui.spinner"),void 0):(t._procOptions(!0),t._createButtons(e),e.is(":enabled")||t.disable(),void 0)},_createButtons:function(s){function m(){return E&&(t(this).removeClass(n),I._stopSpin(),E=!1),!1}function b(){if(!V.disabled){var e=I.element[0],i=this===x?1:-1;e.focus(),e.select(),t(this).addClass(n),E=!0,I._startSpin(i)}return!1}function _(t){function e(){T=0,t()}if(T){if(t===W)return;clearTimeout(T)}W=t,T=setTimeout(e,100)}function w(t,e){if(B)return!1;var n=String.fromCharCode(e||t),i=I.options;return n>="0"&&"9">=n||"-"==n?!1:I.places>0&&n==i.point||n==i.group?!1:!0}function C(t){for(var e=0;e<g.length;e++)if(g[e]==t)return!0;return!1}function y(t){return"auto"==t?0:parseInt(t)}var x,S,M,O,T,W,k,N,B,E,I=this,V=I.options,D=V.className,A=V.width,F=V.showOn,L=t.support.boxModel,P=s.outerHeight(),H=(I.oMargin=y(s.css("margin-right")),I.wrapper=s.wrap('<span class="spinner-wrpr" />').css({width:(I.oWidth=L?s.width():s.outerWidth())-A,marginRight:"30px",marginLeft:"30px",textAlign:"center","float":"none",marginTop:0}).after('<span class="ui-spinner ui-widget"></span>').next()),G=I.btnContainer=t('<div class="ui-spinner-buttons"><div class="ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr"><span class="ui-icon '+V.upIconClass+'"> </span></div><div class="ui-spinner-down ui-spinner-button ui-state-default ui-corner-br"><span class="ui-icon '+V.downIconClass+'"> </span></div></div>'),R="rtl"==s[0].dir;D&&H.addClass(D),H.append(G.css({height:P,left:0,top:0})),M=I.buttons=G.find(".ui-spinner-button"),M.css({width:"30px",height:P-(L?M.outerHeight()-M.height():0)}),M.eq(0).css({right:"0"}),M.eq(1).css({left:"0"}),x=M[0],S=M[1],O=M.find(".ui-icon"),G.width("105px"),"always"!=F&&G.css("opacity",0),("hover"==F||"both"==F)&&M.add(s).bind("mouseenter"+v,function(){_(function(){k=!0,I.focused&&"hover"!=F||I.showButtons()})}).bind("mouseleave"+v,function(){_(function(){k=!1,I.focused&&"hover"!=F||I.hideButtons()})}),M.hover(function(){I.buttons.removeClass(i),V.disabled||t(this).addClass(i)},function(){t(this).removeClass(i)}).mousedown(b).mouseup(m).mouseout(m),f&&M.dblclick(function(){return V.disabled||(I._change(),I._doSpin((this===x?1:-1)*V.step)),!1}).bind("selectstart",function(){return!1}),s.bind("keydown"+v,function(e){var i,s,o,f=e.keyCode;if(e.ctrl||e.alt)return!0;if(C(f)&&(B=!0),N)return!1;switch(f){case a:case c:i=1,s=f==c;break;case r:case p:i=-1,s=f==p;break;case u:case l:i=f==u^R?1:-1;break;case d:return o=I.options.min,null!=o&&I._setValue(o),!1;case h:return o=I.options.max,o=I.options.max,null!=o&&I._setValue(o),!1}return i?(N||V.disabled||(keyDir=i,t(i>0?x:S).addClass(n),N=!0,I._startSpin(i,s)),!1):void 0}).bind("keyup"+v,function(t){if(t.ctrl||t.alt)return!0;switch(C(o)&&(B=!1),t.keyCode){case a:case u:case c:case r:case l:case p:return M.removeClass(n),I._stopSpin(),N=!1,!1}}).bind("keypress"+v,function(t){return w(t.keyCode,t.charCode)?!1:void 0}).bind("change"+v,function(){I._change()}).bind("focus"+v,function(){function t(){I.element.select()}f?t():setTimeout(t,0),I.focused=!0,e=I,k||"focus"!=F&&"both"!=F||I.showButtons()}).bind("blur"+v,function(){I.focused=!1,k||"focus"!=F&&"both"!=F||I.hideButtons()})},_procOptions:function(t){var e,n=this,i=n.element,s=n.options,o=s.min,a=s.max,r=s.step,u=s.places,l=-1;"slow"==s.increment?s.increment=[{count:1,mult:1,delay:250},{count:3,mult:1,delay:100},{count:0,mult:1,delay:50}]:"fast"==s.increment&&(s.increment=[{count:1,mult:1,delay:250},{count:19,mult:1,delay:100},{count:80,mult:1,delay:20},{count:100,mult:10,delay:20},{count:0,mult:100,delay:20}]),null==o&&null!=(e=i.attr("min"))&&(o=parseFloat(e)),null==a&&null!=(e=i.attr("max"))&&(a=parseFloat(e)),r||null==(e=i.attr("step"))||"any"!=e&&(r=parseFloat(e),s.largeStep*=r),s.step=r=r||s.defaultStep,null==u&&-1!=(e=r+"").indexOf(".")&&(u=e.length-e.indexOf(".")-1),n.places=u,null!=a&&null!=o&&(o>a&&(o=a),l=Math.max(Math.max(l,s.format(a,u,i).length),s.format(o,u,i).length)),t&&(n.inputMaxLength=i[0].maxLength),e=n.inputMaxLength,e>0&&(l=l>0?Math.min(e,l):e,e=Math.pow(10,l)-1,(null==a||a>e)&&(a=e),e=-(e+1)/10+1,(null==o||e>o)&&(o=e)),l>0&&i.attr("maxlength",l),s.min=o,s.max=a,n._change(),i.unbind(m+v),s.mouseWheel&&i.bind(m+v,n._mouseWheel)},_mouseWheel:function(n){var i=t.data(this,"spinner");return!i.options.disabled&&i.focused&&e===i?(i._change(),i._doSpin(((n.wheelDelta||-n.detail)>0?1:-1)*i.options.step),!1):void 0},_setTimer:function(t,e,n){function i(){s._spin(e,n)}var s=this;s._stopSpin(),s.timer=setInterval(i,t)},_stopSpin:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},_startSpin:function(t,e){var n=this,i=n.options,s=i.increment;n._change(),n._doSpin(t*(e?n.options.largeStep:n.options.step)),s&&s.length>0&&(n.counter=0,n.incCounter=0,n._setTimer(s[0].delay,t,e))},_spin:function(t,e){var n=this,i=n.options.increment,s=i[n.incCounter];n._doSpin(t*s.mult*(e?n.options.largeStep:n.options.step)),n.counter++,n.counter>s.count&&n.incCounter<i.length-1&&(n.counter=0,s=i[++n.incCounter],n._setTimer(s.delay,t,e))},_doSpin:function(t){var e=this,n=e.curvalue;null==n&&(n=(t>0?e.options.min:e.options.max)||0),e._setValue(n+t)},_parseValue:function(){var t=this.element.val();return t?this.options.parse(t,this.element):null},_validate:function(t){var e=this.options,n=e.min,i=e.max;return null!=t||e.allowNull||(t=null!=this.curvalue?this.curvalue:n||i||0),null!=i&&t>i?i:null!=n&&n>t?n:t},_change:function(){{var t=this,e=t._parseValue();t.options.min,t.options.max}t.selfChange||(isNaN(e)&&(e=t.curvalue),t._setValue(e,!0))},_setOption:function(e,n){t.Widget.prototype._setOption.call(this,e,n),this._procOptions()},increment:function(){this._doSpin(this.options.step)},decrement:function(){this._doSpin(-this.options.step)},showButtons:function(t){var e=this.btnContainer.stop();t?e.css("opacity",1):e.fadeTo("fast",1)},hideButtons:function(t){var e=this.btnContainer.stop();t?e.css("opacity",0):e.fadeTo("fast",0),this.buttons.removeClass(i)},_setValue:function(t,e){var n=this;n.curvalue=t=n._validate(t),n.element.val(null!=t?n.options.format(t,n.places,n.element):""),e||(n.selfChange=!0,n.element.change(),n.selfChange=!1)},value:function(t){return arguments.length?(this._setValue(t),this.element):this.curvalue},enable:function(){this.buttons.removeClass(s),this.element[0].disabled=!1,t.Widget.prototype.enable.call(this)},disable:function(){this.buttons.addClass(s).removeClass(i),this.element[0].disabled=!0,t.Widget.prototype.disable.call(this)},destroy:function(){this.wrapper.remove(),this.element.unbind(v).css({width:this.oWidth,marginRight:this.oMargin}),t.Widget.prototype.destroy.call(this)}})}(jQuery);
<?php
 if( ! class_exists('acf_third_party') ) : class acf_third_party { function __construct() { add_action('admin_head-settings_page_tabify-edit-screen', array($this, 'admin_head_tabify')); add_filter('pts_allowed_pages', array($this, 'pts_allowed_pages')); } function admin_head_tabify() { add_filter('tabify_posttypes', array($this, 'tabify_posttypes')); add_action('tabify_add_meta_boxes', array($this, 'tabify_add_meta_boxes')); } function tabify_posttypes( $posttypes ) { unset( $posttypes['acf-field-group'] ); unset( $posttypes['acf-field'] ); return $posttypes; } function tabify_add_meta_boxes( $post_type ) { $field_groups = acf_get_field_groups(); if( !empty($field_groups) ) { foreach( $field_groups as $field_group ) { $id = "acf-{$field_group['key']}"; $title = 'ACF: ' . $field_group['title']; add_meta_box( $id, $title, '__return_true', $post_type ); } } } function pts_allowed_pages( $pages ) { $post_type = ''; if( !empty($_GET['post_type']) ) { $post_type = $_GET['post_type']; } elseif( !empty($_GET['post']) ) { $post_type = get_post_type( $_GET['post'] ); } if( $post_type == 'acf-field-group' ) { $pages = array(); } return $pages; } } new acf_third_party(); endif; ?>
